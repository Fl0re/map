{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/pages/carte/carte.module.ts","../../src/pages/home/home.module.ts","../../src/pages/login/login.module.ts","../../src/pages/login/login.ts","../../src/providers/auth/auth.ts","../../src/providers/api/api.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/pages/carte/carte.ts","../../src/pages/home/home.ts","../../src/app/app.config.ts","../../src/app/app.component.ts","../../src/services/token-expiration.ts","../../src/services/token-interceptor.ts","../../src/services/auth.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 115;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 115\n// module chunks = 2","var map = {\n\t\"../pages/carte/carte.module\": [\n\t\t158\n\t],\n\t\"../pages/home/home.module\": [\n\t\t159\n\t],\n\t\"../pages/liste/liste.module\": [\n\t\t297,\n\t\t1\n\t],\n\t\"../pages/login/login.module\": [\n\t\t162\n\t],\n\t\"../register/register.module\": [\n\t\t298,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 157;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 157\n// module chunks = 2","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { CartePage } from './carte';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CartePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(CartePage),\r\n  ],\r\n})\r\nexport class CartePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/carte/carte.module.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { HomePage } from './home';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HomePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(HomePage),\r\n  ],\r\n})\r\nexport class HomePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { LoginPage } from './login';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(LoginPage),\r\n  ],\r\n})\r\nexport class LoginPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\r\nimport {App, Events, IonicPage, NavController, NavParams, ToastController} from 'ionic-angular';\r\nimport {FormBuilder, FormGroup, Validators} from \"@angular/forms\";\r\n;\r\n\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\nimport { AuthService } from '../../services/auth';\r\nimport * as AppConfig from \"../../app/app.config\";\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-login',\r\n  templateUrl: 'login.html',\r\n})\r\nexport class LoginPage {\r\n\r\n  public config;\r\n\r\n  //  Notre groupe d'inputs (à l'intérieur de <form>)\r\n  public loginData: FormGroup;\r\n\r\n  constructor(public nav: NavController, public navParams: NavParams, public formBuilder: FormBuilder, public authProvider: AuthProvider, public toastCtrl: ToastController, public authService: AuthService, public app: App) {\r\n    this.config = AppConfig.config;\r\n\r\n    //  On définit des règles de validation\r\n    this.loginData = this.formBuilder.group({\r\n      email: ['', Validators.compose([Validators.required, Validators.email])],\r\n      password: ['', Validators.compose([Validators.required])]\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Chargement des données avant même que la page ne soit affichée\r\n   */\r\n  ionViewCanEnter() {\r\n    //  On vérifie que notre utilisateur n'est pas déjà connecté\r\n    this.authService.checkAuthentified().then(auth => {\r\n      if( auth ) {\r\n        //  Il est connecté ! Direction l'accueil\r\n        this.app.getRootNavs()[0].setRoot('HomePage');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Direction la page d'inscription\r\n\r\n\r\n  /**\r\n   * Soumission du formulaire de connexion\r\n   */\r\n  submitLogin() {\r\n    //  Envoi des données vers notre API\r\n    this.authProvider.login(this.loginData.value.email, this.loginData.value.password).subscribe(response => {\r\n      if( response['success'] ) {   //  Connexion réussie\r\n\r\n        //  On sauvegarde toutes les données utiles en local (token + id de l'utilisateur)\r\n        this.authService.storeCredentials(response['token'], response['user'].id).then(() => {\r\n          //  Direction la page d'accueil après sauvegarde des données\r\n          this.app.getRootNavs()[0].setRoot('HomeTabsPage');\r\n        });\r\n      } else {    //  Echec de connexion\r\n\r\n        //  On affiche un message d'erreur\r\n        let toast = this.toastCtrl.create({\r\n          message: response['error'],\r\n          cssClass: 'toast-danger',\r\n          duration: 3000,\r\n        });\r\n\r\n        //  EN production, on vibre\r\n        if( this.config.prod ) {\r\n    \r\n        }\r\n        toast.present();\r\n      }\r\n    }, error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n  clickparcourir(){\r\n    this.nav.setRoot('HomePage');\r\n\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","import { Injectable } from '@angular/core';\r\nimport {ApiProvider} from \"../api/api\";\r\nimport {HttpHeaders} from \"@angular/common/http\";\r\n\r\n@Injectable()\r\nexport class AuthProvider {\r\n\r\n  /**\r\n   * Constructeur\r\n   * @param {ApiProvider} api\r\n   */\r\n  constructor(public api: ApiProvider) {}\r\n\r\n  /**\r\n   * Permet de raffraichir le token utilisateur\r\n   *\r\n   * @returns {Observable<ArrayBuffer>}\r\n   */\r\n  refresh() {\r\n    let headers = new HttpHeaders();\r\n    //headers.set('Authorization', 'Bearer ' + token);\r\n    return this.api.get('refresh', {\r\n      //headers: headers\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Requête de connexion\r\n   *\r\n   * @param email\r\n   * @param password\r\n   * @returns {Observable<Object>}\r\n   */\r\n  login(email, password) {\r\n    return this.api.post('auth/connexion', {\r\n      email: email,\r\n      password: password\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Requête d'inscription\r\n   *\r\n   * @param data\r\n   * @returns {Observable<Object>}\r\n   */\r\n  register(data) {\r\n    return this.api.post('auth/inscription', data);\r\n  }\r\n\r\n  /**\r\n   * Requête pour récupérer les données de l'utilisateur courant\r\n   *\r\n   * @returns {Observable<Object>}\r\n   */\r\n  getAccountData() {\r\n    return this.api.get('account');\r\n  }\r\n\r\n  /**\r\n   * Mise à jour des données du compte\r\n   *\r\n   * @param data\r\n   * @returns {Observable<Object>}\r\n   */\r\n  updateAccount(data) {\r\n    return this.api.post('account/update', data);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth/auth.ts","import {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport {Storage} from \"@ionic/storage\";\r\nimport {AuthService} from \"../../services/auth\";\r\n\r\n@Injectable()\r\n\r\n/**\r\n * Notre provider Principal\r\n */\r\nexport class ApiProvider {\r\n\r\n  //  URL de notre API en ligne\r\n  private apiUrl: string = 'http://localhost:8000/api3/api/';\r\n\r\n  /**\r\n   * Constructeur\r\n   *\r\n   * @param {HttpClient} http\r\n   * @param {Storage} storage\r\n   * @param {AuthService} authService\r\n   */\r\n  constructor(public http: HttpClient, public storage: Storage, public authService: AuthService) {\r\n  }\r\n\r\n  /**\r\n   * Requête get prenant en compte une fin d'url et des paramètres\r\n   *\r\n   * @param endpoint\r\n   * @param params\r\n   * @returns {Observable<Object>}\r\n   */\r\n  get(endpoint, params ?: any) {\r\n\r\n    //let headers = new HttpHeaders().set('Authorization', 'Bearer ' + this.authService.getToken());\r\n\r\n    return this.http.get(this.apiUrl + endpoint, {\r\n      params: params,\r\n      //headers: headers,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Requête POST\r\n   *\r\n   * @param endpoint\r\n   * @param body\r\n   * @param options\r\n   * @returns {Observable<ArrayBuffer>}\r\n   */\r\n  post(endpoint, body, options ?: any) {\r\n    return this.http.post(this.apiUrl + endpoint, body, options);\r\n  }\r\n\r\n  /**\r\n   * Requête PUT\r\n   *\r\n   * @param endpoint\r\n   * @param body\r\n   * @param options\r\n   * @returns {Observable<ArrayBuffer>}\r\n   */\r\n  put(endpoint, body, options ?: any) {\r\n    return this.http.put(this.apiUrl + endpoint, body, options);\r\n  }\r\n\r\n  /**\r\n   * Requête DELETE\r\n   *\r\n   * @param endpoint\r\n   * @param body\r\n   * @returns {Observable<Object>}\r\n   */\r\n  delete(endpoint, body) {\r\n    return this.http.delete(this.apiUrl + endpoint);\r\n  }\r\n\r\n  /**\r\n   * Requête PATCH\r\n   *\r\n   * @param endpoint\r\n   * @param body\r\n   * @returns {Observable<Object>}\r\n   */\r\n  patch(endpoint, body) {\r\n    return this.http.patch(this.apiUrl + endpoint, body);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/api/api.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app.module';\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { NgModule, ErrorHandler } from '@angular/core';\r\nimport { IonicApp, IonicModule, IonicErrorHandler } from 'ionic-angular';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\n\r\n\r\nimport { MyApp } from './app.component';\r\nimport { HomePageModule } from '../pages/home/home.module';\r\nimport { IonicStorageModule } from '@ionic/storage';\r\n\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http'; \r\nimport { HttpModule } from '@angular/http';\r\n\r\nimport { AuthProvider } from '../providers/auth/auth';\r\nimport { ApiProvider } from '../providers/api/api';\r\nimport { AuthService } from '../services/auth';\r\nimport {TokenExpiration} from \"../services/token-expiration\";\r\nimport {TokenInterceptor} from \"../services/token-interceptor\";\r\nimport {LoginPageModule} from \"../pages/login/login.module\";\r\nimport { CartePageModule } from '../pages/carte/carte.module';\r\n\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MyApp,\r\n  \r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    IonicModule.forRoot(MyApp,{\r\n      tabsHideOnSubPages: true,\r\n\r\n    }),\r\n    IonicStorageModule.forRoot(),\r\n    HttpModule,\r\n    HttpClientModule,\r\n    IonicStorageModule.forRoot(),\r\n    LoginPageModule,\r\n    CartePageModule,\r\n    HomePageModule,\r\n\r\n\r\n  ],\r\n  bootstrap: [IonicApp],\r\n  entryComponents: [\r\n    MyApp,\r\n  \r\n  ],\r\n  providers: [\r\n    StatusBar,\r\n    SplashScreen,\r\n    Geolocation,\r\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\r\n    AuthProvider,\r\n    ApiProvider,\r\n    {\r\n      provide: HTTP_INTERCEPTORS,\r\n      useClass: TokenInterceptor,\r\n      multi: true\r\n    },\r\n    AuthProvider,\r\n    ApiProvider,\r\n    AuthService,\r\n    TokenExpiration,\r\n\r\n  ]\r\n})\r\nexport class AppModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\n\r\n/**\r\n * Generated class for the CartePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-carte',\r\n  templateUrl: 'carte.html',\r\n})\r\nexport class CartePage {\r\n\r\n  constructor(public nav: NavController, public navParams: NavParams) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad CartePage');\r\n  }\r\n  clickliste(){\r\n    this.nav.setRoot('ListePage');\r\n    \r\n\r\n\r\n  }\r\n  clickmap(){\r\n    this.nav.setRoot('HomePage');\r\n\r\n  }\r\n  boolean =false\r\n  clicksearch(){\r\n    if(this.boolean==false){\r\n    this.boolean=true\r\n    document.getElementById('pagesearch').style.display = \"flex\";\r\n    document.getElementById('fond').style.display = \"flex\";\r\n    }\r\n    else{\r\n      this.boolean=false\r\n      document.getElementById('pagesearch').style.display = \"none\";\r\n      document.getElementById('fond').style.display = \"none\";\r\n    }\r\n\r\n  }\r\n  clickcarte(){\r\n    this.nav.setRoot('CartePage');\r\n\r\n  }\r\n  clickexit(){\r\n    this.nav.setRoot('LoginPage');\r\n\r\n  }\r\n  clickfond(){\r\n    this.boolean=false\r\n    document.getElementById('pagesearch').style.display = \"none\";\r\n    document.getElementById('fond').style.display = \"none\";\r\n  }\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/carte/carte.ts","import { identifierModuleUrl } from '@angular/compiler/compiler';\r\nimport { Component, NgZone, ViewChild, ElementRef } from '@angular/core';\r\nimport { ActionSheetController, AlertController, App, LoadingController, NavController, Platform, ToastController, IonicPage } from 'ionic-angular';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\n\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { Storage } from '@ionic/storage';\r\nimport {\r\n  GoogleMapsEvent,\r\n  MarkerCluster,\r\n  Marker,\r\n  GoogleMap\r\n} from \"@ionic-native/google-maps\";\r\n\r\ndeclare var google: any;\r\ndeclare var MarkerClusterer: any;\r\n@IonicPage()\r\n\r\n@Component({\r\n  selector: 'page-home',\r\n  templateUrl: 'home.html',\r\n})\r\nexport class HomePage {\r\n  locations: any;\r\n  @ViewChild('map') mapElement: ElementRef;\r\n  @ViewChild('searchbar', { read: ElementRef }) searchbar: ElementRef;\r\n  addressElement: HTMLInputElement = null;\r\n\r\n  listSearch: string = '';\r\n\r\n  map: any;\r\n  marker: \"\";\r\n  loading: any;\r\n  search: boolean = false;\r\n  error: any;\r\n  switch: string = \"map\";\r\n  markercluster:\"\"\r\n  regionals: any = [];\r\n  currentregional: any;\r\n  markerCluster: any;\r\n  mapLoaded: any;\r\n\r\n\r\n  constructor(\r\n    public loadingCtrl: LoadingController,\r\n    public toastCtrl: ToastController,\r\n    public app: App,\r\n    public nav: NavController,\r\n    public zone: NgZone,\r\n    public platform: Platform,\r\n    public alertCtrl: AlertController,\r\n    public storage: Storage,\r\n    public actionSheetCtrl: ActionSheetController,\r\n    public geolocation: Geolocation\r\n  ) {\r\n    this.platform.ready().then(() => this.loadMaps());\r\n    console.log('Hello GoogleMapsCluster Provider');\r\n \r\n    this.locations = [\r\n        {lat: -31.563910, lng: 147.154312},\r\n        {lat: -33.718234, lng: 150.363181},\r\n        {lat: -33.727111, lng: 150.371124},\r\n        {lat: -33.848588, lng: 151.209834},\r\n        {lat: -33.851702, lng: 151.216968},\r\n        {lat: -34.671264, lng: 150.863657},\r\n        {lat: -35.304724, lng: 148.662905},\r\n        {lat: -36.817685, lng: 175.699196},\r\n        {lat: -36.828611, lng: 175.790222},\r\n        {lat: -37.750000, lng: 145.116667},\r\n        {lat: -37.759859, lng: 145.128708},\r\n        {lat: -37.765015, lng: 145.133858},\r\n        {lat: -37.770104, lng: 145.143299},\r\n        {lat: -37.773700, lng: 145.145187},\r\n        {lat: -37.774785, lng: 145.137978},\r\n        {lat: -37.819616, lng: 144.968119},\r\n        {lat: -38.330766, lng: 144.695692},\r\n        {lat: -39.927193, lng: 175.053218},\r\n        {lat: -41.330162, lng: 174.865694},\r\n        {lat: -42.734358, lng: 147.439506},\r\n        {lat: -42.734358, lng: 147.501315},\r\n        {lat: -42.735258, lng: 147.438000},\r\n        {lat: -43.999792, lng: 170.463352}\r\n    ];\r\n}\r\naddCluster(map){\r\n \r\n  if(google.maps){\r\n\r\n      //Convert locations into array of markers\r\n      let markers = this.locations.map((location) => {\r\n          return new google.maps.Marker({\r\n              position: location,\r\n              label: \"Hello!\"\r\n          });\r\n      });\r\n\r\n      this.markerCluster = new MarkerClusterer(map, markers, {imagePath: 'assets/m'});\r\n\r\n  } else {\r\n      console.warn('Google maps needs to be loaded before adding a cluster');\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n  viewPlace(id) {\r\n    console.log('Clicked Marker', id);\r\n  }\r\n\r\n\r\n  loadMaps() {\r\n    if (!!google) {\r\n      this.initializeMap();\r\n    //  this.initAutocomplete();\r\n    } else {\r\n      this.errorAlert('Error', 'Something went wrong with the Internet Connection. Please check your Internet.')\r\n    }\r\n  }\r\n\r\n  errorAlert(title, message) {\r\n    let alert = this.alertCtrl.create({\r\n      title: title,\r\n      message: message,\r\n      buttons: [\r\n        {\r\n          text: 'OK',\r\n          handler: data => {\r\n            this.loadMaps();\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  // mapsSearchBar(ev: any) {\r\n  //   // set input to the value of the searchbar\r\n  //   //this.search = ev.target.value;\r\n  //   console.log(ev);\r\n  //   const autocomplete = new google.maps.places.Autocomplete(ev);\r\n  //   autocomplete.bindTo('bounds', this.map);\r\n  //   return new Observable((sub: any) => {\r\n  //     google.maps.event.addListener(autocomplete, 'place_changed', () => {\r\n  //       const place = autocomplete.getPlace();\r\n  //       if (!place.geometry) {\r\n  //         sub.error({\r\n  //           message: 'Autocomplete returned place with no geometry'\r\n  //         });\r\n  //       } else {\r\n  //         sub.next(place.geometry.location);\r\n  //         sub.complete();\r\n  //       }\r\n  //     });\r\n  //   });\r\n  // }\r\n\r\n  // initAutocomplete(): void {\r\n \r\n  //   this.addressElement = this.searchbar.nativeElement.querySelector('.searchbar-input');\r\n  //   this.createAutocomplete(this.addressElement).subscribe((location) => {\r\n  //     console.log('Searchdata', location);\r\n\r\n  //     let options = {\r\n  //       center: location,\r\n  //       zoom: 15\r\n  //     };\r\n  //     this.map.setOptions(options);\r\n\r\n  //   });\r\n  // }\r\n\r\n  // createAutocomplete(addressEl: HTMLInputElement): Observable<any> {\r\n  //   const autocomplete = new google.maps.places.Autocomplete(addressEl);\r\n  //   autocomplete.bindTo('bounds', this.map);\r\n  //   return new Observable((sub: any) => {\r\n  //     google.maps.event.addListener(autocomplete, 'place_changed', () => {\r\n  //       const place = autocomplete.getPlace();\r\n  //       if (!place.geometry) {\r\n  //         sub.error({\r\n  //           message: 'Autocomplete returned place with no geometry'\r\n  //         });\r\n  //       } else {\r\n  //         console.log('Search Lat', place.geometry.location.lat());\r\n  //         console.log('Search Lng', place.geometry.location.lng());\r\n  //         sub.next(place.geometry.location);\r\n  //         //sub.complete();\r\n  //       }\r\n  //     });\r\n  //   });\r\n  // }\r\n\r\n  initializeMap() {\r\n    var myLatLng = {lat: -25.363, lng: 131.044};\r\n\r\n    this.zone.run(() => {\r\n      var mapEle = this.mapElement.nativeElement;\r\n      this.map = new google.maps.Map(mapEle, {\r\n        zoom: 10,\r\n        center: { lat: 51.165691, lng: 10.451526 },\r\n        mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n        disableDoubleClickZoom: false,\r\n        disableDefaultUI: true,\r\n        zoomControl: true,\r\n        scaleControl: true,\r\n      });\r\n\r\n      var marker = new google.maps.Marker({\r\n        position: myLatLng,\r\n        map: mapEle,\r\n        title: 'Hello World!'\r\n      });\r\n        \r\n      google.maps.event.addListener(this.map, 'bounds_changed', () => {\r\n        this.zone.run(() => {\r\n          this.resizeMap();\r\n        });\r\n      });\r\n\r\n\r\n    });\r\n  }\r\n\r\n  //Center zoom\r\n  //http://stackoverflow.com/questions/19304574/center-set-zoom-of-map-to-cover-all-visible-markers\r\n  bounceMap(markers) {\r\n    let bounds = new google.maps.LatLngBounds();\r\n\r\n    for (var i = 0; i < markers.length; i++) {\r\n      bounds.extend(markers[i].getPosition());\r\n    }\r\n\r\n    this.map.fitBounds(bounds);\r\n  }\r\n\r\n  resizeMap() {\r\n    setTimeout(() => {\r\n      google.maps.event.trigger(this.map, 'resize');\r\n    }, 200);\r\n  }\r\n\r\n  getCurrentPositionfromStorage(markers) {\r\n    this.storage.get('lastLocation').then((result) => {\r\n      if (result) {\r\n        let myPos = new google.maps.LatLng(result.lat, result.long);\r\n        this.map.setOptions({\r\n          center: myPos,\r\n          zoom: 9\r\n        });\r\n        let marker = this.addMarker(myPos, \"My last saved Location: \" + result.location);\r\n\r\n        markers.push(marker);\r\n        // this.bounceMap(markers);\r\n\r\n        this.resizeMap();\r\n      }\r\n    });\r\n  }\r\n\r\n  showToast(message) {\r\n    let toast = this.toastCtrl.create({\r\n      message: message,\r\n      duration: 3000\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  choosePosition() {\r\n    this.storage.get('lastLocation').then((result) => {\r\n      if (result) {\r\n        let actionSheet = this.actionSheetCtrl.create({\r\n          title: 'Last Location: ' + result.location,\r\n          buttons: [\r\n            {\r\n              text: 'Reload',\r\n              handler: () => {\r\n                this.getCurrentPosition();\r\n              }\r\n            },\r\n            {\r\n              text: 'Delete',\r\n              handler: () => {\r\n                this.storage.set('lastLocation', null);\r\n                this.showToast('Location deleted!');\r\n                this.initializeMap();\r\n              }\r\n            },\r\n            {\r\n              text: 'Cancel',\r\n              role: 'cancel',\r\n              handler: () => {\r\n              }\r\n            }\r\n          ]\r\n        });\r\n        actionSheet.present();\r\n      } else {\r\n        this.getCurrentPosition();\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  // go show currrent location\r\n  getCurrentPosition() {\r\n    this.loading = this.loadingCtrl.create({\r\n      content: 'Searching Location ...'\r\n    });\r\n    this.loading.present();\r\n\r\n    let locationOptions = { timeout: 10000, enableHighAccuracy: true };\r\n\r\n    this.geolocation.getCurrentPosition(locationOptions).then(\r\n      (position) => {\r\n        this.loading.dismiss().then(() => {\r\n\r\n          this.showToast('Location found!');\r\n\r\n          console.log(position.coords.latitude, position.coords.longitude);\r\n          let myPos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\r\n          let options = {\r\n            center: myPos,\r\n            zoom: 14\r\n          };\r\n          this.map.setOptions(options);\r\n          this.addMarker(myPos, \"Mein Standort!\");\r\n\r\n          let alert = this.alertCtrl.create({\r\n            title: 'Location',\r\n            message: 'Do you want to save the Location?',\r\n            buttons: [\r\n              {\r\n                text: 'Cancel'\r\n              },\r\n              {\r\n                text: 'Save',\r\n                handler: data => {\r\n                  let lastLocation = { lat: position.coords.latitude, long: position.coords.longitude };\r\n                  console.log(lastLocation);\r\n                  this.storage.set('lastLocation', lastLocation).then(() => {\r\n                    this.showToast('Location saved');\r\n                  });\r\n                }\r\n              }\r\n            ]\r\n          });\r\n          alert.present();\r\n\r\n        });\r\n      },\r\n      (error) => {\r\n        this.loading.dismiss().then(() => {\r\n          this.showToast('Location not found. Please enable your GPS!');\r\n\r\n          console.log(error);\r\n        });\r\n      }\r\n    )\r\n  }\r\n\r\n  toggleSearch() {\r\n    if (this.search) {\r\n      this.search = false;\r\n    } else {\r\n      this.search = true;\r\n    }\r\n  }\r\n\r\n  addMarker(position, content) {\r\n    let marker = new google.maps.Marker({\r\n      map: this.map,\r\n      animation: google.maps.Animation.DROP,\r\n      position: position\r\n    });\r\n\r\n    this.addInfoWindow(marker, content);\r\n    return marker;\r\n  }\r\n\r\n  addInfoWindow(marker, content) {\r\n    let infoWindow = new google.maps.InfoWindow({\r\n      content: content\r\n    });\r\n\r\n    google.maps.event.addListener(marker, 'click', () => {\r\n      infoWindow.open(this.map, marker);\r\n    });\r\n  }\r\n\r\n  clickliste(){\r\n    this.nav.setRoot('ListePage');\r\n    ;\r\n\r\n\r\n  }\r\n  clickmap(){\r\n    this.nav.setRoot('HomePage');\r\n\r\n  }\r\n  boolean =false\r\n  clicksearch(){\r\n    if(this.boolean==false){\r\n    this.boolean=true\r\n    document.getElementById('pagesearch').style.display = \"flex\";\r\n    document.getElementById('fond').style.display = \"flex\";\r\n    }\r\n    else{\r\n      this.boolean=false\r\n      document.getElementById('pagesearch').style.display = \"none\";\r\n      document.getElementById('fond').style.display = \"none\";\r\n    }\r\n\r\n  }\r\n  clickcarte(){\r\n    this.nav.setRoot('CartePage');\r\n\r\n  }\r\n  clickexit(){\r\n    this.nav.setRoot('LoginPage');\r\n\r\n  }\r\n  clickfond(){\r\n    this.boolean=false\r\n    document.getElementById('pagesearch').style.display = \"none\";\r\n    document.getElementById('fond').style.display = \"none\";\r\n    document.getElementById('legendes').style.left = \"-22%\";\r\n    document.getElementById('legendes').style.transition = \"1s\";\r\n  }\r\n  clicklegende(){\r\n\r\n    document.getElementById('legendes').style.top = \"24%\";\r\n    document.getElementById('legendes').style.transition = \"1s\";\r\n    }\r\n   clicklegendes(){\r\n      document.getElementById('legendes').style.top = \"100%\";\r\n      document.getElementById('legendes').style.transition = \"1s\";\r\n   }\r\n    }\r\n\r\n  \r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","/**\r\n * Configuration de notre application\r\n * @type {{prod: boolean; apiUrl: string; tokenName: string; version: string; appId: string}}\r\n */\r\nexport let config = {\r\n    prod: true,\r\n    apiUrl: '',\r\n    tokenName: 'access_token',\r\n    version: \"0.0.1\",\r\n    appId: 'e5339c39'\r\n  };\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/app/app.config.ts","import { Component } from '@angular/core';\r\nimport { Platform } from 'ionic-angular';\r\n\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\n\r\n\r\nimport { LoginPage } from '../pages/login/login';\r\n\r\n\r\n@Component({\r\n  templateUrl: 'app.html'\r\n})\r\nexport class MyApp {\r\n  rootPage = LoginPage;\r\n\r\n  constructor(platform: Platform, public SplashScreen: SplashScreen, public StatusBar: StatusBar) {\r\n    platform.ready().then(() => {\r\n      // Okay, so the platform is ready and our plugins are available.\r\n      // Here you can do any higher level native things you might need.\r\n      this.StatusBar.styleDefault();\r\n      this.SplashScreen.hide();\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {Injectable} from \"@angular/core\";\r\n\r\n@Injectable()\r\n\r\n/**\r\n * J'ai réalisé cette classe pour pousser la vérification des tokens un peu plus loin.\r\n * Vous pouvez la réutiliser dans vos projets sans soucis. Je ne vous demande pas de tout\r\n * comprendre, mais pour les plus curieux, ça peut être sympa ;)\r\n */\r\nexport class TokenExpiration {\r\n\r\n  /**\r\n   * On vérifie si le token va bientôt expirer\r\n   *\r\n   * @param token\r\n   * @param {number} offsetSeconds\r\n   * @returns {boolean}\r\n   */\r\n  isTokenExpired(token, offsetSeconds ?: number) {\r\n\r\n    //  On récupère la date d'expiration du token\r\n    let date = this.getTokenExpirationDate(token);\r\n\r\n    //  Si aucun paramètre n'est rentré, on le passe à 0 par défaut\r\n    offsetSeconds = offsetSeconds || 0;\r\n\r\n    //  SI pas de date : null\r\n    if (date === null) {\r\n      return false;\r\n    }\r\n\r\n    /**\r\n     * On retourne un boolean pour savoir si la date récupérée est supérieure à la date\r\n     * actuelle (avec en supplément les secondes en paramètres si renseignées)\r\n     */\r\n    return !(date.valueOf() > new Date().valueOf() + offsetSeconds * 1000);\r\n  }\r\n\r\n  /**\r\n   * Retourne la date d'expiration du token\r\n   *\r\n   * @param token\r\n   * @returns {any}\r\n   */\r\n  getTokenExpirationDate(token) {\r\n    //  On décode le token\r\n    let decoded = this.decodeToken(token);\r\n\r\n    //  On vérifie que le token décodé possède la propriétée \"exp\", pour expiration.\r\n    if (!decoded.hasOwnProperty('exp')) {\r\n      return null;\r\n    }\r\n\r\n    //  Date de maintenant\r\n    let date = new Date(0);\r\n\r\n    //  On ajoute les secondes récupérées dans le token et on retourne\r\n    date.setUTCSeconds(decoded.exp);\r\n    return date;\r\n  }\r\n\r\n  /**\r\n   * Fonction pour décoder le token\r\n   * @param token\r\n   * @returns {any}\r\n   */\r\n  decodeToken(token) {\r\n\r\n    //  Notre token est censé être composé de 3 parties, séparées de \".\"\r\n    let parts = token.split('.');\r\n\r\n    //  Si on a pas 3 parties => c'est pas bon, erreur\r\n    if (parts.length !== 3) {\r\n      throw new Error('The inspected token doesn\\'t appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.');\r\n    }\r\n\r\n    //  On décode notre première partie\r\n    let decoded = this.urlBase64Decode(parts[1]);\r\n    if (!decoded) {\r\n      throw new Error('Cannot decode the token.');\r\n    }\r\n\r\n    //  C'est la première partie qui nous intéresse\r\n    return JSON.parse(decoded);\r\n  }\r\n\r\n  /**\r\n   * Décodage en base 64\r\n   *\r\n   * @param str\r\n   * @returns {string}\r\n   */\r\n  base64Decode(str) {\r\n    //  Tous les caractères possibles\r\n    let chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n    let output = '';\r\n\r\n    str = String(str).replace(/=+$/, '');\r\n    if (str.length % 4 === 1) {\r\n      throw new Error(\"'atob' failed: The string to be decoded is not correctly encoded.\");\r\n    }\r\n    for (\r\n      // initialize result and counters\r\n      let bc = 0, bs = void 0, buffer = void 0, idx = 0;\r\n      // get next character\r\n      (buffer = str.charAt(idx++));\r\n      // character found in table? initialize bit storage and add its ascii value;\r\n      ~buffer &&\r\n      ((bs = bc % 4 ? bs * 64 + buffer : buffer),\r\n        // and if not first of each 4 characters,\r\n        // convert the first 8 bits to one ascii character\r\n      bc++ % 4)\r\n        ? (output += String.fromCharCode(255 & (bs >> ((-2 * bc) & 6))))\r\n        : 0) {\r\n      // try to find character in table (0-63, not found => -1)\r\n      buffer = chars.indexOf(buffer);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param str\r\n   * @returns {string}\r\n   */\r\n  urlBase64Decode(str) {\r\n    let output = str.replace(/-/g, '+').replace(/_/g, '/');\r\n    switch (output.length % 4) {\r\n      case 0: {\r\n        break;\r\n      }\r\n      case 2: {\r\n        output += '==';\r\n        break;\r\n      }\r\n      case 3: {\r\n        output += '=';\r\n        break;\r\n      }\r\n      default: {\r\n        throw 'Illegal base64url string!';\r\n      }\r\n    }\r\n    return this.b64DecodeUnicode(output);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param str\r\n   * @returns {string}\r\n   */\r\n  b64DecodeUnicode(str) {\r\n    return decodeURIComponent(Array.prototype.map\r\n      .call(this.base64Decode(str), function (c) {\r\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n      })\r\n      .join(''));\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/token-expiration.ts","import { Injectable } from '@angular/core';\r\nimport {\r\n  HttpRequest,\r\n  HttpHandler,\r\n  HttpEvent,\r\n  HttpInterceptor, HttpErrorResponse, HttpResponse\r\n} from '@angular/common/http';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport 'rxjs/add/operator/do';\r\nimport {AuthService} from \"./auth\";\r\n\r\n@Injectable()\r\n\r\n/**\r\n * Cette classe nous permet d'ajouter des éléments à nos requêtes\r\n * à la volée, de sorte que ça soit transparent dans notre développement\r\n */\r\nexport class TokenInterceptor implements HttpInterceptor {\r\n\r\n  /**\r\n   * Constructeur\r\n   * @param {AuthService} authService\r\n   */\r\n  constructor(public authService: AuthService) {\r\n    console.log(this.authService.getToken());\r\n  }\r\n\r\n  /**\r\n   * Fonction d'interception des requêtes\r\n   *\r\n   * @param {HttpRequest<any>} request\r\n   * @param {HttpHandler} next\r\n   * @returns {Observable<HttpEvent<any>>}\r\n   */\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable <HttpEvent <any> > {\r\n\r\n    //  On clone la requête interceptée, et on lui rajoute notre header d'autorisation (token)\r\n    request = request.clone({\r\n      setHeaders: {\r\n        Authorization: 'Bearer ' + this.authService.getToken()\r\n      }\r\n    });\r\n\r\n    //  On retourne notre requête comme si de rien n'était\r\n    return next.handle(request).do((event: HttpEvent <any>) => {\r\n      if( event instanceof HttpResponse ) {\r\n        /**\r\n         * Pour pousser le vice, on pourrait imaginer un cache ici pour stocker certains\r\n         * résultats de page, pour économiser notre application.\r\n         */\r\n      }\r\n    }, error => {\r\n      if( error instanceof  HttpErrorResponse ) {\r\n        if( error.status === 401 ) {\r\n          /**\r\n           * On pourrait prévoir des pages d'erreurs personnalisés pour éviter les plantages\r\n           */\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/token-interceptor.ts","import {Storage} from \"@ionic/storage\";\r\nimport {Injectable} from \"@angular/core\";\r\nimport {App, Events} from \"ionic-angular\";\r\n\r\n@Injectable()\r\nexport class AuthService {\r\n\r\n  public token: string;\r\n  public userId: number;\r\n  public isAuth: boolean = false;\r\n\r\n  constructor(public storage: Storage, public app: App, public events: Events){\r\n    //this.storage.remove('access_token');\r\n  }\r\n\r\n  setAuth(auth: boolean) {\r\n    this.isAuth = auth;\r\n  }\r\n\r\n  setUserId(id: number) {\r\n    this.userId = id;\r\n  }\r\n\r\n  setToken(token: string) {\r\n    this.token = token;\r\n  }\r\n\r\n  getAuth() {\r\n    return this.isAuth;\r\n  }\r\n\r\n  getUserId() {\r\n    return this.userId;\r\n  }\r\n\r\n  getToken() {\r\n    return this.token;\r\n  }\r\n\r\n  checkAuthentified(): Promise <any> {\r\n    return new Promise((resolve) => {\r\n      this.storage.get('access_token').then(token => {\r\n          if( token ) {\r\n          this.token = token;\r\n          this.isAuth = true;\r\n          resolve(true);\r\n        } else {\r\n          resolve(false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n\r\n  getId(): Promise <any> {\r\n\r\n    return new Promise((resolve) => {\r\n      this.storage.get('user_id').then(userId => {\r\n        if( userId ) {\r\n          console.log(userId);\r\n          this.userId = userId;\r\n          resolve(userId);\r\n          return userId;\r\n        }\r\n        resolve(null);\r\n        return null;\r\n      });\r\n    });\r\n  }\r\n\r\n  storeId(id) {\r\n    this.userId = id;\r\n    this.storage.set('user_id', id);\r\n  }\r\n\r\n  storeCredentials(token, id ?: number) {\r\n    this.isAuth = true;\r\n    this.token = token;\r\n\r\n    this.events.publish('user:login', true);\r\n\r\n    if( id ) {\r\n      this.userId = id;\r\n      this.storage.set('user_id', id);\r\n    }\r\n    return this.storage.set('access_token', token);\r\n  }\r\n\r\n  logout() {\r\n    this.storage.remove('user_id');\r\n    this.storage.remove('access_token').then(() => {\r\n      this.events.publish('user:login', false);\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/auth.ts"],"sourceRoot":""}